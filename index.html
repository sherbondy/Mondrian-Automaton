<!DOCTYPE HTML>
<html lang="en-us">
<head>
	<meta charset="utf-8">
	<link href="http://fonts.googleapis.com/css?family=Arvo&subset=latin" 
	    rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="style.css" type="text/css">
	<link rel="icon" type="img/png" href="favicon.png">
	
	<script src="processing-1.0.0.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" 
        type="text/javascript"></script>
    
    <script type="text/javascript">
		// Array Remove - By John Resig (MIT Licensed)
		Array.prototype.remove = function(from, to) {
		  var rest = this.slice((to || from) + 1 || this.length);
		  this.length = from < 0 ? this.length + from : from;
		  return this.push.apply(this, rest);
		};
		
		var options = ["boogie","color_a","composition", "new_york_creater"];
    
        $(function() {
			// $("canvas").css("-webkit-transform", "rotate(45deg) scale(0.6)");
			
			// ranges for width height tweaking [320,480], [240,480], [480,480]
			$(document).data("width", 480);
			$(document).data("height", 480);
			
			$("canvas").each(function() {
				
				var i = Math.floor(Math.random()*options.length);
				var selection = options[i];
				var my_id = $(this).attr("id");
				$.get(selection+".pde", function(code) {
					$("#"+my_id).data("selection", selection);
					var canvas = document.getElementById(my_id);
					new Processing(canvas, code);
				});
				options.remove(i);
			});
			
            $("#i").click(function() {
                $("#info").toggle();
                $("header").toggleClass("opaque");
                return false;
            });
            $("#x").click(function() {
                $("#info").hide();
                $("header").removeClass("opaque");
                return false;
            });
        
            $("canvas").click(function() {
                //document.location = this.toDataURL();
                return false;
            });
            
            $("#images a").click(function() {
                var canvy = document.getElementById($(this).attr("href").slice(1));
                $("#upload img").attr("src", canvy.toDataURL());
                $("#upload").show();
                return false;
            });
            
            $("#cancel").click(function() {
                $("#upload").hide();
            });
        });
    </script>
    
	<title>Mondrian</title>
</head>
<body>
    <div id="upload">
        <form action="/submit">
            <h2>Add to the Gallery</h2>
            <input type="text" name="image_name" id="image_name" placeholder="Give it a name">
            <img src="#">
            <input type="submit" id="submit" value="Submit">
            <input type="button" id="cancel" value="Cancel">
        </form>
    </div>
    
    <header>
        <h1><a href="/">Mondrian Automaton</a></h1>
        <a href="#info" id="i">Info</a>
        <a href="gallery" id="gal">Gallery</a>
    </header>
    
    <details id="info">
        <p>An experiment in websites as art for 
            <a href="http://courses.media.mit.edu/2010fall/mas110/">MAS.110</a>.
        </p>
        <p>
            Mondrian-style images are generated with a little 
            help from <a href="http://processingjs.org/">processing.js</a>.
        </p>
        
        <p>
            Icons from <a href="http://glyphish.com/">Glyphish</a>.
            The typefaces are Distill and Arvo.
        </p>
        <p>
            Created by <a href="http://www.tooepic.com">Ethan Sherbondy</a>.
        </p>
        <p>
            Play with the source on <a href="https://github.com/sherbondy/Mondrian-Automaton">GitHub</a>.
        </p>
        <a id="x" href="#">X</a>
    </details>
    
    <div id="content">
        <h2>Choose the image you prefer, and we&rsquo;ll hone in on your tastes.</h2>
            
        <ol id="images">
            <li>
                <canvas id="c1"></canvas>
                <a href="#c1">Add to gallery</a>
            </li>
        
            <li>
                <canvas id="c2"></canvas>
                <a href="#c2">Add to gallery</a>
            </li>
            
            <li>
                <canvas id="c3"></canvas>
                <a href="#c3">Add to gallery</a>
            </li>
        
            <li>
                <canvas id="c4"></canvas>
                <a href="#c4">Add to gallery</a>
            </li>
        </ol>
    </div>
</body>
</html>